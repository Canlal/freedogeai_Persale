<!-- Purchase Section -->
<div class="purchase-section">
    <div class="input-group">
        <label for="bnbAmount" class="input-label" id="bnbAmountLabel">Enter BNB Amount:</label>
        <input type="number" id="bnbAmount" class="input-field" placeholder="0.0" step="any" min="0">
        <div class="calculation" id="calculationResult" style="display: none;">
            You will receive: <span id="fdaiAmount">0</span> FDAI
        </div>
    </div>
    <button class="buy-btn" id="buyBtn" disabled>Buy Tokens</button>
    
    <div class="token-ownership" id="tokenOwnership" style="display: none;">
        <p id="ownershipText">You Own:</p>
        <div class="token-amount" id="ownedTokens">0 FDAI</div>
        <p class="token-note" id="tokenNote">Your tokens will be reflected in your wallet after the presale ends.</p>
    </div>
</div>

<!-- Whitepaper Section -->
<div class="whitepaper-section">
    <button class="whitepaper-btn" id="whitepaperBtn">
        <span>üìÑ</span>
        <span id="whitepaperText">Download Whitepaper</span>
    </button>
</div>

<!-- Community Section -->
<div class="community-section">
    <h3 class="community-title" id="communityTitle">Join Our Community</h3>
    <p class="community-desc" id="communityDesc">Stay updated and connected with the FreeDogeAI community</p>
    <div class="community-buttons">
        <a href="https://t.me/freedogeaiFDAI" class="community-btn telegram-btn" target="_blank">
            <span>üì®</span>
            <span>Telegram</span>
        </a>
        <a href="https://x.com/FreeDogeAI_FDAI?t=eIChyd2UmaOZbljCWY7I2w&s=09" class="community-btn twitter-btn" target="_blank">
            <span>üê¶</span>
            <span>Twitter</span>
        </a>
    </div>
</div>
</div>

<!-- Wallet Connection Modal -->
<div class="modal" id="walletModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="modalTitle">Connect Wallet</h3>
            <button class="close-btn" id="closeModalBtn">&times;</button>
        </div>
        <div class="wallet-option" id="metamaskOption">
            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask" class="wallet-icon">
            <span class="wallet-name">MetaMask</span>
        </div>
        <div class="wallet-option" id="trustwalletOption">
            <img src="https://trustwallet.com/assets/images/media/assets/TWT.png" alt="Trust Wallet" class="wallet-icon">
            <span class="wallet-name">Trust Wallet</span>
        </div>
    </div>
</div>

<script>
    // Constants
    const FDAI_PER_BNB = 120000000000; // 120 billion FDAI per 1 BNB
    const FDAI_TOKEN_ADDRESS = "0x8161698A74F2ea0035B9912ED60140893Ac0f39C";
    const BNB_RECEIVER_ADDRESS = "0xd924e01c7d319c5b23708cd622bd1143cd4fb360";
    
    // DOM Elements
    const languageBtn = document.getElementById('languageBtn');
    const languageDropdown = document.getElementById('languageDropdown');
    const currentLanguage = document.getElementById('currentLanguage');
    const connectWalletBtn = document.getElementById('connectWalletBtn');
    const walletInfo = document.getElementById('walletInfo');
    const walletAddress = document.getElementById('walletAddress');
    const bnbBalance = document.getElementById('bnbBalance');
    const purchasedFdai = document.getElementById('purchasedFdai');
    const bnbAmountInput = document.getElementById('bnbAmount');
    const calculationResult = document.getElementById('calculationResult');
    const fdaiAmount = document.getElementById('fdaiAmount');
    const buyBtn = document.getElementById('buyBtn');
    const tokenOwnership = document.getElementById('tokenOwnership');
    const ownedTokens = document.getElementById('ownedTokens');
    const whitepaperBtn = document.getElementById('whitepaperBtn');
    const walletModal = document.getElementById('walletModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const metamaskOption = document.getElementById('metamaskOption');
    const trustwalletOption = document.getElementById('trustwalletOption');
    
    // State
    let isWalletConnected = false;
    let userAddress = '';
    let userFdaiBalance = 0;
    
    // Language translations
    const translations = {
        en: {
            title: "Presale Ends Soon",
            subtitle: "Don't miss your chance to participate in the FreeDogeAI presale",
            connectWallet: "Connect Wallet",
            walletInfo: "Wallet Information",
            enterBnb: "Enter BNB Amount:",
            youWillReceive: "You will receive:",
            buyTokens: "Buy Tokens",
            youOwn: "You Own:",
            tokenNote: "Your tokens will be reflected in your wallet after the presale ends.",
            downloadWhitepaper: "Download Whitepaper",
            joinCommunity: "Join Our Community",
            communityDesc: "Stay updated and connected with the FreeDogeAI community",
            connectModalTitle: "Connect Wallet"
        },
        tr: {
            title: "√ñn Satƒ±≈ü Yakƒ±nda Bitiyor",
            subtitle: "FreeDogeAI √∂n satƒ±≈üƒ±na katƒ±lma ≈üansƒ±nƒ± ka√ßƒ±rma",
            connectWallet: "C√ºzdan Baƒüla",
            walletInfo: "C√ºzdan Bilgisi",
            enterBnb: "BNB Miktarƒ± Girin:",
            youWillReceive: "Alacaksƒ±nƒ±z:",
            buyTokens: "Token Satƒ±n Al",
            youOwn: "Sahip Olduƒüunuz:",
            tokenNote: "Tokenleriniz √∂n satƒ±≈ü sona erdikten sonra c√ºzdanƒ±nƒ±za yansƒ±tƒ±lacaktƒ±r.",
            downloadWhitepaper: "Whitepaper ƒ∞ndir",
            joinCommunity: "Topluluƒüumuza Katƒ±lƒ±n",
            communityDesc: "FreeDogeAI topluluƒüuyla g√ºncel kalƒ±n ve baƒülantƒ±da olun",
            connectModalTitle: "C√ºzdan Baƒüla"
        },
        ja: {
            title: "„Éó„É¨„Çª„Éº„É´ÁµÇ‰∫ÜÈñìËøë",
            subtitle: "FreeDogeAI„Éó„É¨„Çª„Éº„É´„Å´ÂèÇÂä†„Åô„Çã„ÉÅ„É£„É≥„Çπ„Çí„ÅäË¶ãÈÄÉ„Åó„Å™„Åè",
            connectWallet: "„Ç¶„Ç©„É¨„ÉÉ„Éà„ÇíÊé•Á∂ö",
            walletInfo: "„Ç¶„Ç©„É¨„ÉÉ„ÉàÊÉÖÂ†±",
            enterBnb: "BNBÊï∞Èáè„ÇíÂÖ•Âäõ:",
            youWillReceive: "Âèó„ÅëÂèñ„Çä„Åæ„Åô:",
            buyTokens: "„Éà„Éº„ÇØ„É≥„ÇíË≥ºÂÖ•",
            youOwn: "ÊâÄÊúâ„Åó„Å¶„ÅÑ„Çã:",
            tokenNote: "„Éà„Éº„ÇØ„É≥„ÅØ„Éó„É¨„Çª„Éº„É´ÁµÇ‰∫ÜÂæå„Å´„Ç¶„Ç©„É¨„ÉÉ„Éà„Å´ÂèçÊò†„Åï„Çå„Åæ„Åô„ÄÇ",
            downloadWhitepaper: "„Éõ„ÉØ„Ç§„Éà„Éö„Éº„Éë„Éº„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ",
            joinCommunity: "„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å´ÂèÇÂä†",
            communityDesc: "FreeDogeAI„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å®„Å§„Å™„Åå„Çä„ÄÅÊúÄÊñ∞ÊÉÖÂ†±„ÇíÂÖ•Êâã„Åó„Åæ„Åó„Çá„ÅÜ",
            connectModalTitle: "„Ç¶„Ç©„É¨„ÉÉ„Éà„ÇíÊé•Á∂ö"
        },
        zh: {
            title: "È¢ÑÂîÆÂç≥Â∞ÜÁªìÊùü",
            subtitle: "‰∏çË¶ÅÈîôËøáÂèÇ‰∏éFreeDogeAIÈ¢ÑÂîÆÁöÑÊú∫‰ºö",
            connectWallet: "ËøûÊé•Èí±ÂåÖ",
            walletInfo: "Èí±ÂåÖ‰ø°ÊÅØ",
            enterBnb: "ËæìÂÖ•BNBÊï∞Èáè:",
            youWillReceive: "‰Ω†Â∞ÜÊî∂Âà∞:",
            buyTokens: "Ë¥≠‰π∞‰ª£Â∏Å",
            youOwn: "‰Ω†Êã•Êúâ:",
            tokenNote: "È¢ÑÂîÆÁªìÊùüÂêéÔºå‰ª£Â∏ÅÂ∞ÜÂèçÊò†Âú®‰Ω†ÁöÑÈí±ÂåÖ‰∏≠„ÄÇ",
            downloadWhitepaper: "‰∏ãËΩΩÁôΩÁöÆ‰π¶",
            joinCommunity: "Âä†ÂÖ•Êàë‰ª¨ÁöÑÁ§æÂå∫",
            communityDesc: "‰∏éFreeDogeAIÁ§æÂå∫‰øùÊåÅËÅîÁ≥ªÂπ∂Ëé∑ÂèñÊúÄÊñ∞‰ø°ÊÅØ",
            connectModalTitle: "ËøûÊé•Èí±ÂåÖ"
        },
        ru: {
            title: "–ü—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–∞ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è",
            subtitle: "–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ —à–∞–Ω—Å –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–µ FreeDogeAI",
            connectWallet: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫",
            walletInfo: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ",
            enterBnb: "–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ BNB:",
            youWillReceive: "–í—ã –ø–æ–ª—É—á–∏—Ç–µ:",
            buyTokens: "–ö—É–ø–∏—Ç—å —Ç–æ–∫–µ–Ω—ã",
            youOwn: "–í –≤–∞—à–µ–º –≤–ª–∞–¥–µ–Ω–∏–∏:",
            tokenNote: "–í–∞—à–∏ —Ç–æ–∫–µ–Ω—ã –±—É–¥—É—Ç –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ –≤–∞—à–µ–º –∫–æ—à–µ–ª—å–∫–µ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–∏.",
            downloadWhitepaper: "–°–∫–∞—á–∞—Ç—å Whitepaper",
            joinCommunity: "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É",
            communityDesc: "–ë—É–¥—å—Ç–µ –≤ –∫—É—Ä—Å–µ –∏ –æ—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ —Å–≤—è–∑–∏ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º FreeDogeAI",
            connectModalTitle: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫"
        }
    };
    
    // Set initial language
    let currentLang = 'en';
    updateLanguage(currentLang);
    
    // Event Listeners
    languageBtn.addEventListener('click', () => {
        languageDropdown.classList.toggle('show');
    });
    
    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', () => {
            const lang = option.getAttribute('data-lang');
            currentLang = lang;
            currentLanguage.textContent = option.textContent;
            languageDropdown.classList.remove('show');
            updateLanguage(lang);
        });
    });
    
    // Close language dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
            languageDropdown.classList.remove('show');
        }
    });
    
    connectWalletBtn.addEventListener('click', () => {
        walletModal.style.display = 'flex';
    });
    
    closeModalBtn.addEventListener('click', () => {
        walletModal.style.display = 'none';
    });
    
    window.addEventListener('click', (e) => {
        if (e.target === walletModal) {
            walletModal.style.display = 'none';
        }
    });
    
    metamaskOption.addEventListener('click', connectMetaMask);
    trustwalletOption.addEventListener('click', connectTrustWallet);
    
    bnbAmountInput.addEventListener('input', calculateFdai);
    
    buyBtn.addEventListener('click', buyTokens);
    
    whitepaperBtn.addEventListener('click', () => {
        // In a real implementation, this would link to your actual whitepaper PDF
        alert('Downloading Whitepaper...');
        // window.location.href = 'path/to/whitepaper.pdf';
    });
    
    // Functions
    function updateLanguage(lang) {
        const texts = translations[lang];
        
        document.getElementById('mainTitle').textContent = texts.title;
        document.getElementById('mainSubtitle').textContent = texts.subtitle;
        connectWalletBtn.textContent = texts.connectWallet;
        document.querySelector('.wallet-info h3').textContent = texts.walletInfo;
        document.getElementById('bnbAmountLabel').textContent = texts.enterBnb;
        document.getElementById('buyBtn').textContent = texts.buyTokens;
        document.getElementById('ownershipText').textContent = texts.youOwn;
        document.getElementById('tokenNote').textContent = texts.tokenNote;
        document.getElementById('whitepaperText').textContent = texts.downloadWhitepaper;
        document.getElementById('communityTitle').textContent = texts.joinCommunity;
        document.getElementById('communityDesc').textContent = texts.communityDesc;
        document.getElementById('modalTitle').textContent = texts.connectModalTitle;
        
        // Update calculation text
        if (calculationResult.style.display !== 'none') {
            calculationResult.innerHTML = `${texts.youWillReceive} <span id="fdaiAmount">0</span> FDAI`;
        }
    }
    
    async function connectMetaMask() {
        if (typeof window.ethereum === 'undefined') {
            alert('MetaMask is not installed! Please install it first.');
            return;
        }
        
        try {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            userAddress = accounts[0];
            handleWalletConnection(userAddress);
            
            // Listen for account changes
            window.ethereum.on('accountsChanged', (newAccounts) => {
                if (newAccounts.length === 0) {
                    // Wallet disconnected
                    handleWalletDisconnection();
                } else {
                    // Account changed
                    userAddress = newAccounts[0];
                    updateWalletInfo(userAddress);
                }
            });
            
            // Listen for chain changes
            window.ethereum.on('chainChanged', () => {
                window.location.reload();
            });
            
            walletModal.style.display = 'none';
        } catch (error) {
            console.error('Error connecting to MetaMask:', error);
            alert('Failed to connect to MetaMask: ' + error.message);
        }
    }
    
    async function connectTrustWallet() {
        if (window.trustwallet) {
            // Trust Wallet browser
            try {
                const accounts = await window.trustwallet.request({ method: 'eth_requestAccounts' });
                userAddress = accounts[0];
                handleWalletConnection(userAddress);
                walletModal.style.display = 'none';
            } catch (error) {
                console.error('Error connecting to Trust Wallet:', error);
                alert('Failed to connect to Trust Wallet: ' + error.message);
            }
        } else if (window.ethereum) {
