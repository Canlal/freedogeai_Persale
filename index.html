<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeDogeAI Ã–n SatÄ±ÅŸ</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        /* AynÄ± CSS kodu burada kalacak */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #000000;
            margin: 0;
            padding: 20px;
            color: #FFD700;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #000000;
            padding: 25px;
            border-radius: 16px;
            border: 2px solid #00FF66;
            box-shadow: 0 0 10px 3px #00FF66;
        }
        /* DiÄŸer stiller aynÄ± ÅŸekilde devam ediyor... */
    </style>
</head>
<body>
    <!-- HTML yapÄ±sÄ± aynÄ± kalÄ±yor -->
    <div class="container">
        <!-- Ã–nceki tÃ¼m iÃ§erik aynÄ± -->
    </div>

    <script>
        const CONFIG = {
            RECEIVE_WALLET: "0xd924e01c7d319c5b23708cd622bd1143cd4fb360",
            TOKENS_PER_BNB: 120000000000,
            TOKENS_PER_USDT: 200000000,
            BSC_CHAIN_ID: 56,
            USDT_CONTRACT: "0x55d398326f99059fF775485246999027B3197955"
        };

        let web3;
        let userAddress = "";
        let usdtContract;

        window.addEventListener('DOMContentLoaded', () => {
            const connectBtn = document.getElementById('connectWalletBtn');
            const buyBtn = document.getElementById('buyBtn');
            const amountInput = document.getElementById('amount');
            const paymentMethodSelect = document.getElementById('paymentMethod');

            connectBtn.addEventListener('click', connectWallet);
            buyBtn.addEventListener('click', sendPayment);
            amountInput.addEventListener('input', calculateFDAI);
            paymentMethodSelect.addEventListener('change', togglePaymentMethod);
            
            buyBtn.disabled = true;
            
            if (window.ethereum?.selectedAddress) {
                connectWallet();
            }
        });

        function togglePaymentMethod() {
            const method = document.getElementById('paymentMethod').value;
            if (method === 'bnb') {
                document.getElementById('rateInfo').textContent = '1 BNB = 120,000,000,000 FDAI';
                document.getElementById('amount').placeholder = 'Miktar girin (Ã¶rn: 0.1 BNB)';
                document.getElementById('amount').step = '0.01';
                document.getElementById('amount').min = '0.01';
            } else {
                document.getElementById('rateInfo').textContent = '1 USDT = 200,000,000 FDAI';
                document.getElementById('amount').placeholder = 'Miktar girin (Ã¶rn: 1 USDT)';
                document.getElementById('amount').step = '1';
                document.getElementById('amount').min = '1';
            }
            calculateFDAI();
        }

        async function connectWallet() {
            try {
                if (!window.ethereum) {
                    alert("CÃ¼zdan bulunamadÄ±. LÃ¼tfen MetaMask veya Trust Wallet yÃ¼kleyin.");
                    return;
                }

                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAddress = accounts[0];
                web3 = new Web3(window.ethereum);

                // USDT kontratÄ±nÄ± baÅŸlat
                const usdtAbi = [
                    {
                        "constant": true,
                        "inputs": [{"name": "_owner", "type": "address"}],
                        "name": "balanceOf",
                        "outputs": [{"name": "balance", "type": "uint256"}],
                        "type": "function"
                    },
                    {
                        "constant": false,
                        "inputs": [
                            {"name": "_to", "type": "address"},
                            {"name": "_value", "type": "uint256"}
                        ],
                        "name": "transfer",
                        "outputs": [{"name": "", "type": "bool"}],
                        "type": "function"
                    }
                ];
                usdtContract = new web3.eth.Contract(usdtAbi, CONFIG.USDT_CONTRACT);

                // BSC aÄŸÄ±na geÃ§iÅŸ yap
                try {
                    const chainId = await web3.eth.getChainId();
                    if (chainId !== CONFIG.BSC_CHAIN_ID) {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0x38' }] // BSC chain ID
                        });
                    }
                } catch (error) {
                    console.error("AÄŸ deÄŸiÅŸtirme hatasÄ±:", error);
                }

                await updateWalletUI();
            } catch (error) {
                console.error("BaÄŸlantÄ± hatasÄ±:", error);
                alert("CÃ¼zdan baÄŸlantÄ±sÄ± baÅŸarÄ±sÄ±z: " + error.message);
            }
        }

        async function updateWalletUI() {
            const shortAddress = `${userAddress.slice(0, 6)}...${userAddress.slice(-4)}`;
            document.getElementById('walletAddress').textContent = shortAddress;
            document.getElementById('walletInfo').style.display = 'block';
            document.getElementById('connectWalletBtn').textContent = 'âœ… BaÄŸlandÄ±';
            document.getElementById('buyBtn').disabled = false;
            
            // Bakiyeleri gÃ¼ncelle
            try {
                const bnbBalance = await web3.eth.getBalance(userAddress);
                document.getElementById('bnbBalance').textContent = `${web3.utils.fromWei(bnbBalance, 'ether').slice(0, 8)} BNB`;
                
                const usdtBalance = await usdtContract.methods.balanceOf(userAddress).call();
                document.getElementById('usdtBalance').textContent = `${web3.utils.fromWei(usdtBalance, 'ether')} USDT`;
            } catch (error) {
                console.error("Bakiye alma hatasÄ±:", error);
            }
        }

        function calculateFDAI() {
            const method = document.getElementById('paymentMethod').value;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            let fdai = 0;
            
            if (method === 'bnb') {
                fdai = amount * CONFIG.TOKENS_PER_BNB;
            } else if (method === 'usdt') {
                fdai = amount * CONFIG.TOKENS_PER_USDT;
            }
            
            document.getElementById('fdaiAmount').textContent = fdai.toLocaleString();
        }

        async function sendPayment() {
            try {
                const method = document.getElementById('paymentMethod').value;
                const amount = parseFloat(document.getElementById('amount').value);
                
                if (isNaN(amount) || amount <= 0) {
                    alert("LÃ¼tfen geÃ§erli bir miktar girin!");
                    return;
                }
                
                if (!confirm(`${amount} ${method.toUpperCase()} gÃ¶ndererek ${document.getElementById('fdaiAmount').textContent} FDAI alacaksÄ±nÄ±z. OnaylÄ±yor musunuz?`)) {
                    return;
                }

                const buyBtn = document.getElementById('buyBtn');
                buyBtn.disabled = true;
                buyBtn.textContent = 'Ä°ÅŸlem gÃ¶nderiliyor...';

                let transactionReceipt;
                
                if (method === 'bnb') {
                    // BNB gÃ¶nder
                    const amountWei = web3.utils.toWei(amount.toString(), 'ether');
                    transactionReceipt = await web3.eth.sendTransaction({
                        from: userAddress,
                        to: CONFIG.RECEIVE_WALLET,
                        value: amountWei
                    });
                } else {
                    // USDT gÃ¶nder
                    const amountWei = web3.utils.toWei(amount.toString(), 'ether');
                    transactionReceipt = await usdtContract.methods.transfer(
                        CONFIG.RECEIVE_WALLET,
                        amountWei
                    ).send({ from: userAddress });
                }

                alert(`Ä°ÅŸlem baÅŸarÄ±lÄ±!\nÄ°ÅŸlem Hash: ${transactionReceipt.transactionHash}\nAlacaÄŸÄ±nÄ±z FDAI tokenleri 24 saat iÃ§inde cÃ¼zdanÄ±nÄ±za yÃ¼klenecektir.`);
                
            } catch (error) {
                console.error("Ã–deme hatasÄ±:", error);
                alert("Ä°ÅŸlem baÅŸarÄ±sÄ±z oldu: " + (error.message || "Beklenmeyen bir hata oluÅŸtu"));
            } finally {
                const buyBtn = document.getElementById('buyBtn');
                buyBtn.disabled = false;
                buyBtn.textContent = 'ðŸš€ FDAI Token SatÄ±n Al';
            }
        }
    </script>
</body>
</html>
