<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeDogeAI Presale</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ana Stil */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e1e1e 0%, #3a3a3a 100%);
            color: white;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* Buton Stilleri */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
            border: none;
            text-decoration: none;
        }
        .btn-meta {
            background: #f6851b;
            color: white;
        }
        .btn-trust {
            background: #3375bb;
            color: white;
        }
        .btn-pdf {
            background: #e74c3c;
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* DiÄŸer Elementler */
        .token-amount {
            font-size: 24px;
            font-weight: bold;
            color: #f6851b;
            margin: 15px 0;
            text-align: center;
        }
        .wallet-info {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; color: #f6851b;">FreeDogeAI Presale</h1>
        
        <!-- CÃ¼zdan BaÄŸlantÄ± ButonlarÄ± -->
        <div style="text-align: center; margin: 20px 0;">
            <button id="connectMetaMask" class="btn btn-meta">
                <i class="fab fa-ethereum"></i> Connect MetaMask
            </button>
            <button id="connectTrustWallet" class="btn btn-trust">
                <i class="fas fa-wallet"></i> Connect TrustWallet
            </button>
        </div>
        
        <!-- CÃ¼zdan Bilgileri -->
        <div class="wallet-info">
            <div id="walletStatus">ðŸ”´ Wallet not connected</div>
            <div id="walletAddress" style="display: none;"></div>
            <div id="bnbBalance">BNB Balance: --</div>
        </div>
        
        <!-- BNB GiriÅŸi -->
        <div style="margin: 20px 0;">
            <input type="number" id="bnbAmount" placeholder="Enter BNB amount (Min: 0.035)" 
                   style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444;">
            <div class="token-amount" id="fdaiAmount">0 FDAI</div>
            <div style="text-align: center;">1 BNB = 12,500,000 FDAI</div>
        </div>
        
        <!-- SatÄ±n Alma Butonu -->
        <button id="buyButton" class="btn btn-meta" style="width: 100%;" disabled>
            <i class="fas fa-shopping-cart"></i> Buy FDAI Tokens
        </button>
        
        <!-- Whitepaper Ä°ndirme -->
        <div style="text-align: center; margin: 25px 0;">
            <a href="whitepaper.pdf" download="FreeDogeAI_Whitepaper.pdf" class="btn btn-pdf">
                <i class="fas fa-file-pdf"></i> Download Whitepaper
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script>
        // CONFIG
        const CONFIG = {
            BNB_RECEIVER: "0xd924e01c7d319c5b23708cd622bd1143cd4fb360",
            TOKEN_PRICE: 12500000,
            MIN_BNB: 0.035,
            CHAIN_ID: 56 // BSC Mainnet
        };

        // TrustWallet BaÄŸlantÄ±sÄ± (Grok'tan AlÄ±nan Kod)
        async function connectTrustWallet() {
            try {
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (isMobile) {
                    // TrustWallet mobil uygulama linki
                    window.location.href = `https://link.trustwallet.com/open_url?coin_id=20000714&url=${encodeURIComponent(window.location.href)}`;
                } else {
                    // Desktop'ta TrustWallet extension kontrolÃ¼
                    if (!window.ethereum || !window.ethereum.isTrust) {
                        window.open("https://trustwallet.com/download", "_blank");
                        throw new Error("TrustWallet extension not found!");
                    }
                    await connectWallet();
                }
            } catch (error) {
                alert(`TrustWallet Error: ${error.message}`);
            }
        }

        // MetaMask BaÄŸlantÄ±sÄ± (Mobilde UygulamayÄ± AÃ§ar)
        async function connectMetaMask() {
            try {
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (isMobile && !window.ethereum?.isMetaMask) {
                    window.location.href = `https://metamask.app.link/dapp/${encodeURIComponent(window.location.href)}`;
                    return;
                }

                if (!window.ethereum) {
                    window.open("https://metamask.io/download.html", "_blank");
                    throw new Error("MetaMask not installed!");
                }

                await connectWallet();
            } catch (error) {
                alert(`MetaMask Error: ${error.message}`);
            }
        }

        // Ortak CÃ¼zdan BaÄŸlantÄ± Fonksiyonu
        async function connectWallet() {
            const provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            const signer = provider.getSigner();
            const address = await signer.getAddress();
            
            // AÄŸ kontrolÃ¼
            const network = await provider.getNetwork();
            if (network.chainId !== CONFIG.CHAIN_ID) {
                alert("Please switch to Binance Smart Chain!");
                return;
            }
            
            // UI GÃ¼ncelleme
            document.getElementById("walletStatus").textContent = "ðŸŸ¢ Wallet connected";
            document.getElementById("walletAddress").style.display = "block";
            document.getElementById("walletAddress").textContent = `Address: ${address.slice(0, 6)}...${address.slice(-4)}`;
            
            // BNB bakiyesini gÃ¶ster
            const balance = await provider.getBalance(address);
            document.getElementById("bnbBalance").textContent = `BNB Balance: ${ethers.utils.formatEther(balance).slice(0, 6)}`;
        }

        // Event Listeners
        document.getElementById("connectMetaMask").addEventListener("click", connectMetaMask);
        document.getElementById("connectTrustWallet").addEventListener("click", connectTrustWallet);
        
        // BNB miktarÄ± deÄŸiÅŸimini dinle
        document.getElementById("bnbAmount").addEventListener("input", function(e) {
            const bnb = parseFloat(e.target.value);
            const tokens = isNaN(bnb) ? 0 : bnb * CONFIG.TOKEN_PRICE;
            document.getElementById("fdaiAmount").textContent = `${tokens.toLocaleString()} FDAI`;
        });
    </script>
</body>
</html>
